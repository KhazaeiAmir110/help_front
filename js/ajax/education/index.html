<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax</title>

    <!--  style  -->
    <style>
        .category-box{
            width: 250px;
            height: 200px;
            margin: 15px;
            float: left;
            box-shadow: 0 1px 14px 2px #c0c0c0;
        }
    </style>
</head>
<body>
<div id="demo"></div>

<label>
    <input>
    <button onclick="getXml()">show info</button>
</label>
<hr>
<div id="result"></div>

<div>
    <div id="true-text">
        <h1>
        Loremipsum - 1
        </h1>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
            magna aliqua. Semper viverra nam libero justo laoreet sit amet. Sapien nec sagittis aliquam malesuada. Nec
            sagittis aliquam malesuada bibendum arcu vitae. Aliquam eleifend mi </p>
        <p>in nulla posuere sollicitudin. Aliquet sagittis id consectetur purus ut faucibus. Diam maecenas sed enim ut sem
            viverra. Turpis in eu mi bibendum neque egestas congue. Consequat ac felis donec et odio pellentesque diam
            volutpat. Proin fermentum leo vel orci porta non pulvinar neque laoreet. Est ullamcorper eget nulla facilisi
            etiam dignissim diam quis enim. Ultrices sagittis orci a scelerisque purus semper. Vulputate eu scelerisque
            felis imperdiet proin fermentum leo vel orci. Semper eget duis at tellus at urna condimentum. Sem integer vitae
            justo eget magna. Proin nibh nisl condimentum id venenatis a.

            Nullam non nisi est sit amet facilisis. Tempus urna et pharetra pharetra massa massa ultricies. Quis enim
            lobortis scelerisque fermentum dui faucibus. Sit amet mauris commodo quis. Et ultrices neque ornare aenean
            euismod elementum nisi quis eleifend. Nisi lacus sed viverra tellus in hac. Amet nisl purus in mollis nunc.
            Aliquet bibendum enim facilisis gravida. Placerat in egestas erat imperdiet sed euismod nisi porta. Tellus
            elementum sagittis vitae et leo. Ultrices tincidunt arcu non sodales neque sodales.
        </p>
    </div>
    <div id="false-text"></div>
    <br><hr>
    <button onclick="changeText2()">Change Text</button>
</div>
<br><hr>
<button onclick="getDataApi()">Get API</button>
<button onclick="clearText()">Clear Text</button>
<div id="container"></div>


</body>

<script>
    let xml = new XMLHttpRequest()
    xml.open('GET', '../simple/help.html')

    xml.onreadystatechange = function (){
        if (this.readyState === XMLHttpRequest.DONE){
            if (this.status === 200){
                console.log('done', this.responseText)
                document.getElementById('demo').innerHTML = this.responseText
            }else if (this.status === 400){
                console.log('not found!!!')
            }
        }
    }

    xml.send()
</script>

<script>
    let xml2 = new XMLHttpRequest()

    let data = {
        username : 'amir',
        email : 'amir@gmail.com'
    }

    xml2.open('POST', 'index.html')
    xml2.setRequestHeader('input', 'application/json; charset=UTF-8')

    xml2.addEventListener('load', function (){
        if (this.readyState === 201){
            console.log('done' , this.responseText)
        }else {
            console.log(this.status)
        }
    })

    xml2.send(JSON.stringify(data))
</script>

<script>
    function getXml(){
        let xml3 = new XMLHttpRequest()

        xml3.open('GET', 'info.html')

        xml3.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200){
                document.querySelector('#result').innerHTML = this.response
            }
        }

        xml3.send()
    }
</script>

<!--Average-->
<script>
    function changeText2() {
        let xml4 = new XMLHttpRequest()

        xml4.open('GET', 'page2.html')

        xml4.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200){
                document.querySelector('#true-text').style.display = 'none'
                document.querySelector('#false-text').innerHTML = this.response
            }
        }
        xml4.send()
    }
</script>

<!--API-->
<script>
    function getDataApi() {
        let xml5 = new XMLHttpRequest()

        xml5.open('GET', 'https://apitester.ir/api/Categories')

        xml5.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200){
                 generate(JSON.parse(this.response))
            }
        }

        function generate(data) {
            for (let i = 0; i < data.length; i++) {
                createBox(data[i])
            }
        }

        function createBox(category) {
            let box = document.createElement('div')
            box.className = 'category-box'

            let title = document.createElement('h3')
            title.innerHTML = category.categoryName

            let description = document.createElement('p')
            description.innerHTML = category.description

            box.appendChild(title)
            box.appendChild(description)

            document.querySelector('#container').appendChild(box)
        }

        xml5.send()
    }

    function clearText() {
        document.querySelector('#container').innerHTML = ''
    }
</script>
</html>